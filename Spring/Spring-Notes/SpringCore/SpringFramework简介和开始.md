# SpringFramework简介和开始

:happy:

**重点：**

- **理解Spring框架核心思想**
- **了解Spring框架特点**
- **掌握基于Spring框架的项目搭建**

## 1.Spring介绍

- Spring是为解决企业应用程序开发复杂性而创建的。
- Spring是以IoC,AOP为主要思想构建的JavaEE框架
- Spring是一个“一站式”框架，即Spring在JavaEE的三层架构：表现层(Web层)，业务逻辑层（Service层），数据库访问层(DAO即Data Access Object)中，每一层均提供了不同的解决技术。

### 1.1Spring框架模块

![1554804949684](C:\Users\32183\AppData\Roaming\Typora\typora-user-images\1554804949684.png)

- Core Container(核心容器)：核心容器提供Spring框架的**基本功能**。核心容器的主要组件是BeanFactory，它是工厂模式的实现。BeanFactory使用**控制反转(IOC)模式**将应用程序的**配置和依赖规范**与实际的应用程序代码分开。
- Context(Spring 上下文): Spring**上下文是一个配置文件，向Spring框架提供上下文信息**。Spring上下文包括企业服务，例如JNDI、EJB、电子邮件、国际化、校验和调度功能。
- Spring AOP：通过配置管理特性，SpringAOP模块直接将面向切面的编程功能集成到了Spring框架中。所以，可以很容易的使Spring框架管理的任何对象支持**AOP**。Spring AOP模块为基于Spring的应用程序中的对象提供了**事务管理服务**。通过使用Spring AOP，不用依赖EJB组件，就可以将**声明性事务管理集成到应用程序中**。
- Spring DAO:JDBC DAO抽象层提供了有意义的异常层次结构，可用该结构来管理异常处理和不同数据库供应上抛出的错误信息。异常层次结构简化了错误处理，并且极大的降低了所需要编写的异常代码数量（例如打开和关闭连接）。**Spring DAO的面向JDBC的异常遵从通用的DAO异常层次结构。**
- Spring ORM:Spring框架插入了若干个ORM框架，从而提供了ORM的对象关系工具，其中包括了JDO、Hibernate和Mybatis SQL Map。所有这些都遵从Spring的通用事务和DAO异常层次结构。
- Spring Web模块：**Web上下文模块建立在应用 程序上下文模块之上**，为基于Web的应用程序提供了上下文。
- Spring 框架支持与Jakarta Struts/Struts2的集成。Web模块还简化了处理多部份请求以及将请求参数绑定到域对象的工作。
- Spring MVC框架：**MVC框架是一个全功能的构建Web应用程序的MVC实现**。通过策略接口，MVC框架变成高度可配置的，MVC容纳了大量视图技术，其中包括JSP、Velocity、Tiles、iText和POI。

### 1.2Spring核心思想

#### 1.2.1基本概念

- IoC（Inversion of Control）:控制反转，程序-->框架(IoC容器),框架共有的特性。
- IoC容器：实现IoC思想的容器就是IoC容器，eg:SpringFremework,[Guice][https://github.com/google/guice]（Google开源轻量级框架）
- DI（Dependency Injection）:依赖注入用一个单独对象（装配器）来装配对象之间的依赖关系。

#### 1.2.2IoC容器特点

- 无序主动new,描述对象如何创建即可，Ioc容器帮你创建，即**被动实例化**；

- 不需要主动装配对象之间的关系，而是描述需要那个服务（组件），IoC容器会帮你装配（及负责将他们关联起来），**被动接收装配**；

- **迪米特法则**（最少知识原则）：不知道依赖的具体表现，只知道需要提供某类服务的对象（面向抽象编程），松散耦合，一个对象应当对其他对象尽可能少地了解，低耦合。

- IoC是一种让服务消费者**不直接依赖**于服务提供者的组件设计方式，是一种减少类与类之间依赖的设计原则

  > 主动边被动，好莱坞法则：别打电话给我们，我们会打给你 

#### 1.2.3理解IoC容器

容器：**提供组件运行环境，管理组件生命周期（不管组件如何创建的以及组件之间的关系如何装配的）**。IoC容器不仅仅具有容器的功能，而且还具有一些其他特性，比如依赖装配。

如何管理IoC

- 谁控制谁？为什么叫反转？

  > IoC容器控制，以前是程序直接控制。

- 控制什么

  > 控制应用程序所需要的资源（对象，文件…）

- 为什么控制？

  > 解耦组件之间的关系

- 控制的那些方面发生了反转

  > 程序控制权发生反转，从应用程序转移到IOC容器

#### 1.2.4 理解DI

控制反转概念太泛化，让人迷惑，后来[MartionFowler][https://martinfowler.com/]提出依赖注入概念（扩展阅读）

DI问题

- 谁依赖于谁？

  > 应用程序依赖IoC容器

- 为什么需要依赖？

  > 应用程序依赖IoC容器装配类之间的关系

- 依赖什么东西？

  > 依赖IoC容器的装配功能

- 谁注入于谁？

  > IoC容器注入应用程序

- 注入什么东西

  > 注入应用程序需要的资源（类之间的关系）

“依赖注入”(Dependency Injection) IoC容器应该具有依赖注入功能，因此也可以叫DI容器

#### 1.2.6理解DI优点

- 帮你看清组件之间的依赖关系，只需要观察依赖注入的机制（setter/构造器），就可以掌握整个依赖(类与类之间的关系)。
- 组件之间的依赖关系由容器在运行期决定，形象的来说，即由容器动态的将某种依赖关系注入到组件之中。

- 依赖注入的目标并非为软件系统带来更多的功能，**而是为了提升组件重用的概率，并为系统搭建一个灵活，可扩展的平台**。通过依赖注入机制，我们只需要通过简单的配置，而无需任何代码就可以指定目标需要的资源，完成自身的业务逻辑，而不关系具体的资源来自何处，由谁实现。

> 注意：使用DI的限制，组件和装配器(IoC容器)之间不会有依赖关系，因此组件无法从装配器哪里获得更多服务，只能获得配置信息中所提供的那些。

#### 1.2.7思路改变

- 应用程序不主动创建对象，但是**描述创建它们的方式**。
- 在应用程序代码中不直接进行服务的装配，但是**配置文件中描述哪一个组件需要哪一项服务**。**容器负责将这些装配在一起**。

IoC/DI其原理基于OO设计原则的**好莱坞原则**，也就是说，所有组件都是被动（Passive）,**所有组件的初始化和装配都是由容器负责**。**组件处在一个容器当中，由容器负责管理。**

### 1.3Spring框架特点

| 特点          | 说明                                                         |
| ------------- | ------------------------------------------------------------ |
| 轻量级        | Spring在大小和透明性方面绝对属于轻量级的，基础版本的Spring框架大约之只有2MB |
| 控制反转      | Spring使用[控制反转][http://www.javacodegeeks.com/2011/08/what-is-dependency-inversion-is-it-ioc.html]技术实现了松耦合。依赖被注入到对象，而不是创建或寻找依赖对象 |
| 面向切面 编程 | [Spring支持面向切面编程][http://www.javacodegeeks.com/2011/01/aspect-oriented-programming-spring-aop.html]，同时把应用的**业务逻辑**与**系统的服务**分离开来 |
| 容器          | Spring包含并管理**应用程序对象的配置及生命周期**             |
| MVC框架       | Spring的web框架是一个设计优良的Web MVC框架，很好的取代了一些web框架 |
| 事务管理      | Spring**对下至本地业务** **对上至全局业务(JAT**)    **提供了统一的事务管理接口** |
| 异常处理      | Spring提供一个方便的API 将特定技术的异常(由JDBC, Hibernate, 或JDO抛出)转化为一致的、 **Unchecked异常** |

### 1.4Spring设计哲学

**了解一个框架**时，重要的不仅仅是要知道它做了什么，**还要知道它遵循了什么原则。**以下是Spring框架的指导原则：

- **在每个层次都提供选择**: Spring允许您尽可能推迟设计决策。例如，您可以在不更改代码的情况下通过配置切 换持久性提供者。对于许多其它基础设施问题，以及与第三方api的集成也是如此。
-  **容纳不同的观点**：Spring拥抱灵活性，并不对事情应该如何做的而固执己见。它以不同的视角支持广泛的应 用程序需求。 
- **保持强烈的向后兼容性**：Spring的演化经过了精心的努力，在不同版本之间很少有突破性的变化。Spring支持精心选择的JDK版本和第三方库，以促进依赖于Spring的应用程序和库的维护。 
- **关心API设计**：Spring团队将大量的思想和时间投入到制作api中，这些api是直观的，并且在许多版本和许多年里都能保持。 
- **为代码质量制定高标准**：Spring框架非常强调有意义的、当前的和准确的Javadoc。它是为数不多的几个能够声称干净的代码结构，并且在包之间没有循环依赖关系的项目之一。 

## 2.[Spring生态][https://spring.io/projects]

一致遵循模块化设计理念，生态体系中每一项目下会有各种不同的模块，致力于解决企业应用所面临的问题。比如：数据库的操作（关系型，非关系型），批处理，安全，社交网络，微服务，大数据，云存储，工程管 理等等



Spring所有生态下的项目都基于`SpringFrameWork`来实现，其中`SpringFrameWork`的`core`模块是基础。SpringBoot是在SpringFramework的基础上来满足现代企业应用**快速迭代开发**，开箱即用，微服务化的需求，同时解决SpringFramework在开发应用时配置繁琐，服务粒度小，继承第三方框架或者服务繁琐等问题。

### 3.Spring应用案例

