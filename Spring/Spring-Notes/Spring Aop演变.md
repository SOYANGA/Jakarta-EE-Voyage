# Spring Aop演变

**重点**

> 1. 理解AOP概念
> 2. 了解AOP的基础知识’
> 3. 掌握AOP的基础编程
> 4. 了解基于@AspectJ和Schema的AOP

## 1.AOP是什么？

### 1.1AOP的概念

AOP`Aspect oriented Programing`简称，面向切面编程。可以说是OOP（`Object-Oriented Programing`面向对象编程）的补充和完善。OOP三大特征：**封装、继承、多态**等概念来建立一种**对象层结构**，**用以模拟公共行为的一个集合**。当我们需要**分散的对象引入公共行为的时候**，OOP则显得无能为力。也就是说，**OOP允许你定义从上到下的关系，但并不适合定义从左到右的关系**。

例如日志功能，日志代码往往水平的散步在所有对象层次中，而与它所散步到的对象的核心功能毫无关系。对于其他类型的代码，如安全性，异常处理也是如此。**这种散步在各处的代码被称为横切（cross-cutting）代码，在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。** 

而AOP技术则恰恰相反，它利用一种称为“横切”的技术，解剖开封装的对象内部，并将那些影响了多个类的**公共行为封装到一个可重用模块**，并将其命名为“Aspect”切面

所谓”切面“，**就是将那些与业务无关，却为业务模块所共同调用或责任封装起来，==便于减少系统的重复代码，降低模块之间的耦合度，并有利于未来的可操作性和维护性。==**AOP代表的是一个横向的关系。

> 如果说“对象”是一个空心圆柱体，其中封装的是对象得到属性和行为；那么面向切面编程就是一把利刃，将这些空心圆柱剖开，以获得其内部的消息。而剖开的切面，也就是所谓的“切面”了，然后它又以巧夺天功的妙手将这些切面复原，不留痕迹。

![1555488483358](D:\婕\JavaEE学习之路\Spring\picture\AOP与OOP关注点的区别)

AOP把软件系统分为两部分：**核心关注点**和**横切关注点**。 

两点之间并没有紧密的耦合  解耦**功能逻辑**和**对象核心业务**

**核心关注点：**业务处理的主要流程就是核心关注点

**横切关注点**：与之关系不大的部分且每层业务都会涉及到的公共部分被称为横切关注点。(并不是所属对象所作的事)

**横切关注点的特点：**横切关注点有一个特点，他们经常发生在核心关注点的多处，而各处都基本相似。比如权限认证，日志，事务处理。

**AOP的作用**：AOP的作用在于**分离系统中的各个关注点，将核心关注点和横切关注点分离开来。**

**AOP的核心思想**就是“**将应用程序中的商业逻辑同对其提供支持的通用服务进行分离**。”-----拆分核心关注点 与 横切关注点（通用辅助共同点）

![1555489002470](D:\婕\JavaEE学习之路\Spring\picture\OOP作用)

实现AOP技术，主要分为两大类

- 采用**动态代理技术**，利用**截取消息**的方式，对该**消息进行装饰**，以**取代原有对象行为的执行**。
- 采用**静态植入的方式**，引入特定的语法创建“切面“”，从而使得编译器可以在**编译期间植入有关“切面”的代码。** 

## 2.AOP思想演变

### 2.1演变过程-1

设置一个如下场景，支付程序：

```java

```

